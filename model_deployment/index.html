
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../model_preparation/">
      
      
        <link rel="next" href="../cloud_configuration/general_configuration/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.11">
    
    
      
        <title>Model deployment - CloudVVUQ documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.85bb2934.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a6bdf11c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#model-deployment" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="CloudVVUQ documentation" class="md-header__button md-logo" aria-label="CloudVVUQ documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CloudVVUQ documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Model deployment
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="CloudVVUQ documentation" class="md-nav__button md-logo" aria-label="CloudVVUQ documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CloudVVUQ documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../model_preparation/" class="md-nav__link">
        Model preparation
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Model deployment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Model deployment
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#model-deployment" class="md-nav__link">
    Model deployment
  </a>
  
    <nav class="md-nav" aria-label="Model deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aws-lambda" class="md-nav__link">
    AWS Lambda
  </a>
  
    <nav class="md-nav" aria-label="AWS Lambda">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#copy-paste-deployment" class="md-nav__link">
    Copy-paste deployment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zip-file-deployment" class="md-nav__link">
    Zip file deployment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-image-deployment" class="md-nav__link">
    Docker image deployment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#google-cloud-functions" class="md-nav__link">
    Google Cloud Functions
  </a>
  
    <nav class="md-nav" aria-label="Google Cloud Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#copy-paste-deployment_1" class="md-nav__link">
    Copy-paste deployment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zip-archive-deployment" class="md-nav__link">
    Zip archive deployment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#google-cloud-run" class="md-nav__link">
    Google Cloud Run
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-image-creation-and-deployment" class="md-nav__link">
    Docker image creation and deployment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-image-templates" class="md-nav__link">
    Docker image templates
  </a>
  
    <nav class="md-nav" aria-label="Docker image templates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aws-lambda-using-aws-base-image" class="md-nav__link">
    AWS Lambda using AWS base-image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#google-cloud-run_1" class="md-nav__link">
    Google Cloud Run
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Cloud configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Cloud configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cloud_configuration/general_configuration/" class="md-nav__link">
        General configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cloud_configuration/aws_lambda/" class="md-nav__link">
        AWS Lambda
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cloud_configuration/google_cloud_run/" class="md-nav__link">
        Google Cloud Run
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cloud_configuration/google_cloud_functions/" class="md-nav__link">
        Google Cloud Functions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../credentials_configuration/" class="md-nav__link">
        Credentials configuration
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../local_configuration/" class="md-nav__link">
        Local configuration
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
      
        <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/examples_tube_deflection/" class="md-nav__link">
        Tube Deflection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/examples_fusion/" class="md-nav__link">
        Fusion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/examples_ishigami/" class="md-nav__link">
        Ishigami
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../trivia/" class="md-nav__link">
        Trivia
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#model-deployment" class="md-nav__link">
    Model deployment
  </a>
  
    <nav class="md-nav" aria-label="Model deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aws-lambda" class="md-nav__link">
    AWS Lambda
  </a>
  
    <nav class="md-nav" aria-label="AWS Lambda">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#copy-paste-deployment" class="md-nav__link">
    Copy-paste deployment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zip-file-deployment" class="md-nav__link">
    Zip file deployment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-image-deployment" class="md-nav__link">
    Docker image deployment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#google-cloud-functions" class="md-nav__link">
    Google Cloud Functions
  </a>
  
    <nav class="md-nav" aria-label="Google Cloud Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#copy-paste-deployment_1" class="md-nav__link">
    Copy-paste deployment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zip-archive-deployment" class="md-nav__link">
    Zip archive deployment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#google-cloud-run" class="md-nav__link">
    Google Cloud Run
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-image-creation-and-deployment" class="md-nav__link">
    Docker image creation and deployment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-image-templates" class="md-nav__link">
    Docker image templates
  </a>
  
    <nav class="md-nav" aria-label="Docker image templates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aws-lambda-using-aws-base-image" class="md-nav__link">
    AWS Lambda using AWS base-image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#google-cloud-run_1" class="md-nav__link">
    Google Cloud Run
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Model deployment</h1>

<h2 id="model-deployment">Model deployment</h2>
<h3 id="aws-lambda">AWS Lambda</h3>
<ol>
<li>Go to Lambda service.</li>
<li>Choose AWS region the closest to you.</li>
<li>Click "Create function".</li>
<li>Choose a deployment option and name the function.<ol>
<li>if you choose <strong>author-from-scratch</strong> then specify your runtime language and use defaults.</li>
<li>if you choose <strong>container image</strong> then select you container image from Elastic Container Registry (see "Docker image deployment" how to upload docker image).</li>
</ol>
</li>
<li>Click "Create function" and wait for it to be created.</li>
<li>If you decided to <strong>author-from-scratch</strong> then see next sections to see how you can deploy your code.</li>
<li>Proceed to function configuration.</li>
<li>In general configuration set timeout longer than your model execution maximum time.</li>
<li>Allocate enough memory for your function.</li>
<li>Go to Function URL and enable it.</li>
<li>Model is deployed.</li>
</ol>
<h4 id="copy-paste-deployment">Copy-paste deployment</h4>
<p>Probably easiest and most intuitive deployment mode. Just create a hello-world function using web console then replace the code using built-in code editor. Not the best option for large code bases and many dependencies.</p>
<p>Create the following structure in the code-editor:
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>model_name
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>│   model.py
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>│   wrapper.py    
</code></pre></div></p>
<p>You can make use of folders and add additional files as long as you can correctly call the main model's method from the wrapper. </p>
<h4 id="zip-file-deployment">Zip file deployment</h4>
<p><a href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-function-zip.html">Documentation</a></p>
<p>Create the following structure and zip <strong>files</strong> inside:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>lambda
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>│   model.py
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>│   wrapper.py    
</code></pre></div>
Then you can upload the zip file into the lambda functions using web console.
If your archive is bigger than 50 MB you must first upload the archive to S3 and then when deploying lambda you specify S3 url to archive.</p>
<p>There are alternative deployment modes. Check it out especially if you need dependencies not provided by layers. <a href="https://docs.aws.amazon.com/lambda/latest/dg/python-package.html">Guide</a>  </p>
<h4 id="docker-image-deployment">Docker image deployment</h4>
<p><em>Is this section we expect that you have ready-to-deploy container image. If not check the "Docker image creation and deployment
" section first.</em></p>
<p>First you have to upload built image to AWS Elastic Container Registry: <a href="https://docs.aws.amazon.com/lambda/latest/dg/images-create.html">Guide</a><br />
1. Authenticate the Docker CLI to your Amazon ECR registry<br />
2. Tag your image <code>docker tag SOURCE_IMAGE REPOSITORY_NAME/IMAGE_NAME</code><br />
3. Push image docker <code>push REPOSITORY_NAME/IMAGE_NAME</code>  </p>
<h3 id="google-cloud-functions">Google Cloud Functions</h3>
<ol>
<li>Go to Cloud Functions service.</li>
<li>Fill the configuration:</li>
<li>Name the function</li>
<li>Choose GCP region the closest to you.</li>
<li>Verify that HTTPS trigger with authentication is selected as a trigger.</li>
<li>Expand "Runtime, build, connections and security setting section"<ol>
<li>Allocate enough memory for your function.</li>
<li>Set the timeout longer than your model execution maximum time</li>
<li>Set upper limit for maximum number of instances (1000 is fine).</li>
<li>Choose the runtime service account. Have one created that allows only GC Function invocations (remember about the principle of the least privilege). <a href="https://cloud.google.com/iam/docs/understanding-service-accounts">Documentation</a></li>
</ol>
</li>
<li>Click next</li>
<li>Choose runtime language, entry point, insert your code by either pasting or uploading a zip archive. </li>
<li>Click deploy and wait for it to be ready.</li>
<li>Model is deployed.</li>
</ol>
<h4 id="copy-paste-deployment_1">Copy-paste deployment</h4>
<p>Probably easiest and most intuitive deployment mode. Just modify a hello-world function using web console then replace the code using built-in code editor. Not the best option for large code bases and many dependencies.</p>
<p>Create the following structure in the code-editor:
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>model_name
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>│   model.py
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>|   requirements.txt
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>│   wrapper.py  (aka main.py)    
</code></pre></div>
Insert your dependencies in requirements.txt file. They will be installed during the deployment.
You can make use of folders and add additional files as long as you can correctly call the main model's method from the wrapper. </p>
<h4 id="zip-archive-deployment">Zip archive deployment</h4>
<p>Create the following structure and zip <strong>files</strong> inside:
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>function
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>│   model.py
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>|   requirements.txt
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>│   wrapper.py  (aka main.py)     
</code></pre></div></p>
<p>Then you can upload the zip file into the GC Function using web console.</p>
<h3 id="google-cloud-run">Google Cloud Run</h3>
<h3 id="docker-image-creation-and-deployment">Docker image creation and deployment</h3>
<p><a href="https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-images.html">Documentation</a></p>
<ol>
<li>Have docker installed locally - <a href="https://docs.docker.com/get-docker/">Download and installation guide</a></li>
<li>Create a Dockerfile in your project (make use of boilerplate code provided below). Example project structure:
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>project
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>|   Dockerfile
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>│   requirements.txt
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>│   wrapper.py
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>|   model.py    
</code></pre></div></li>
<li>Build your image, use cli in project's directory
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>docker build .
</code></pre></div></li>
<li>
<p>(Optional but recommended) Test image locally
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>docker run -p 8080:8080 &lt;image_id&gt;
</code></pre></div>
Replace image_id. You can list all image ids using
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>docker images
</code></pre></div>
If your image is running as a container you can paste 
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://127.0.0.1:8080&quot;</span>
</code></pre></div>
into you local (client) code where you have CloudVVUQ installed and try to compute a single sample.
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">outputs</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">samples</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">max_load</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></p>
</li>
<li>
<p>Possible misconfigurations and remedies:  </p>
<ul>
<li>request does not reach the container<ul>
<li>check if port 8080 is opened  </li>
</ul>
</li>
<li>container crashed due to misconfigured paths  <ul>
<li>check if you correctly imported your model in the wrapper code  </li>
<li>check if all dependencies are installed</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="docker-image-templates">Docker image templates</h3>
<h4 id="aws-lambda-using-aws-base-image">AWS Lambda using AWS base-image</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">public.ecr.aws/lambda/python:3.9</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="k">COPY</span><span class="w"> </span>requirements.txt<span class="w">  </span>.
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="k">RUN</span><span class="w">  </span>pip3<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt<span class="w"> </span>--target<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">LAMBDA_TASK_ROOT</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="k">COPY</span><span class="w"> </span>model.py<span class="w"> </span><span class="si">${</span><span class="nv">LAMBDA_TASK_ROOT</span><span class="si">}</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;app.handler&quot;</span><span class="w"> </span><span class="p">]</span>
</code></pre></div>
<h4 id="google-cloud-run_1">Google Cloud Run</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">python:3.10-slim</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="k">ADD</span><span class="w"> </span>app/requirements.txt<span class="w"> </span>.
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="k">RUN</span><span class="w"> </span>pip3<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="k">COPY</span><span class="w"> </span>/app<span class="w"> </span>/app
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="k">EXPOSE</span><span class="w"> </span><span class="s">8080:8080</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;python3&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;main.py&quot;</span><span class="p">]</span>
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.fac441b0.min.js"></script>
      
    
  </body>
</html>